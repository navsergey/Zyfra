# üì¶ –û–±–∑–æ—Ä —Ñ–∞–π–ª–æ–≤ Kubernetes

## –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã

### üìÑ `namespace.yaml`
–°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ namespace `dev` –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### üöÄ `deployment.yaml`
–û—Å–Ω–æ–≤–Ω–æ–π –º–∞–Ω–∏—Ñ–µ—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- **Replicas**: 2 (–≤—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)
- **Image**: zyfrabotfront:1.0
- **Resources**: requests/limits –¥–ª—è CPU –∏ RAM
- **Probes**: liveness –∏ readiness –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **Strategy**: RollingUpdate –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ downtime

### üåê `service.yaml`
ClusterIP —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–¥–∞–º:
- **Type**: ClusterIP
- **Port**: 80
- **Selector**: app=zyfra-frontend

### üîó `ingress.yaml`
Ingress –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
- **Host**: zyfra.dev.local
- **Path**: / (–≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã)
- **IngressClass**: nginx
- **Annotations**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è nginx-ingress-controller

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

### ‚öñÔ∏è `hpa.yaml`
HorizontalPodAutoscaler –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:
- **Min replicas**: 2
- **Max replicas**: 10
- **Metrics**: CPU 70%, Memory 80%
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –ø–ª–∞–≤–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### üéØ `kustomization.yaml`
Kustomize –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
- –î–æ–±–∞–≤–ª—è–µ—Ç –æ–±—â–∏–µ labels
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å overlays –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

---

## –£—Ç–∏–ª–∏—Ç—ã

### üõ†Ô∏è `Makefile`
–£–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kubernetes:
```bash
make deploy          # –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
make delete          # –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
make status          # –°—Ç–∞—Ç—É—Å —Ä–µ—Å—É—Ä—Å–æ–≤
make logs            # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
make port-forward    # Port-forward –Ω–∞ localhost
make scale REPLICAS=5  # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å
make restart         # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
make help            # –í—Å–µ –∫–æ–º–∞–Ω–¥—ã
```

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üìò `README.md`
–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (300+ —Å—Ç—Ä–æ–∫):
- –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- HTTPS / TLS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- Troubleshooting
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### üöÄ `QUICKSTART.md`
–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 3 –∫–æ–º–∞–Ω–¥—ã:
1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±—Ä–∞–∑–∞
2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
3. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

### üìã `FILES_OVERVIEW.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
–ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

---

## CI/CD –ø—Ä–∏–º–µ—Ä—ã

### ü¶ä `.gitlab-ci.yml.example`
–ü—Ä–∏–º–µ—Ä GitLab CI/CD pipeline:
- Build Docker –æ–±—Ä–∞–∑–∞
- Deploy –≤ dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- Deploy –≤ production (–≤—Ä—É—á–Ω—É—é)

### üêô `.github-actions.yml.example`
–ü—Ä–∏–º–µ—Ä GitHub Actions workflow:
- Build –∏ push Docker –æ–±—Ä–∞–∑–∞
- Deploy –≤ development (–≤–µ—Ç–∫–∞ develop)
- Deploy –≤ production (–≤–µ—Ç–∫–∞ main)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```
k8s/
‚îú‚îÄ‚îÄ namespace.yaml              # Namespace dev
‚îú‚îÄ‚îÄ deployment.yaml             # Deployment —Å 2 —Ä–µ–ø–ª–∏–∫–∞–º–∏
‚îú‚îÄ‚îÄ service.yaml                # ClusterIP Service
‚îú‚îÄ‚îÄ ingress.yaml                # Nginx Ingress
‚îú‚îÄ‚îÄ hpa.yaml                    # HorizontalPodAutoscaler
‚îú‚îÄ‚îÄ kustomization.yaml          # Kustomize –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Makefile                    # –£—Ç–∏–ª–∏—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
‚îú‚îÄ‚îÄ README.md                   # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICKSTART.md               # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ FILES_OVERVIEW.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .gitlab-ci.yml.example      # GitLab CI/CD –ø—Ä–∏–º–µ—Ä
‚îî‚îÄ‚îÄ .github-actions.yml.example # GitHub Actions –ø—Ä–∏–º–µ—Ä
```

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
kubectl apply -k k8s/

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
cd k8s && make deploy
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl get all -n dev

# –õ–æ–≥–∏
kubectl logs -n dev -l app=zyfra-frontend -f

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
cd k8s && make status
cd k8s && make logs
```

### –î–æ—Å—Ç—É–ø

```bash
# Port-forward
kubectl port-forward -n dev service/zyfra-frontend-service 8080:80

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
cd k8s && make port-forward
```

### –£–¥–∞–ª–µ–Ω–∏–µ

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã
kubectl delete -k k8s/

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
cd k8s && make delete
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞

–í `deployment.yaml` –∏–∑–º–µ–Ω–∏—Ç–µ:
```yaml
image: zyfrabotfront:1.0  # ‚Üí –≤–∞—à –æ–±—Ä–∞–∑
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ host

–í `ingress.yaml` –∏–∑–º–µ–Ω–∏—Ç–µ:
```yaml
host: zyfra.dev.local  # ‚Üí –≤–∞—à –¥–æ–º–µ–Ω
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ namespace

–í `kustomization.yaml` –∏–∑–º–µ–Ω–∏—Ç–µ:
```yaml
namespace: dev  # ‚Üí –≤–∞—à namespace
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

–í `deployment.yaml` –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:
```yaml
resources:
  requests:
    memory: "128Mi"  # ‚Üí —É–≤–µ–ª–∏—á—å—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    cpu: "100m"
  limits:
    memory: "256Mi"
    cpu: "200m"
```

---

## üìä –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Kubernetes**: 1.20+
- **kubectl**: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- **Ingress Controller**: nginx-ingress (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **Metrics Server**: –¥–ª—è HPA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Kustomize** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
3. **–í–∫–ª—é—á–∏—Ç–µ HPA** –¥–ª—è –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (Prometheus + Grafana)
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Secrets** –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
6. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ backup** –¥–ª—è –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!** üöÄ

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞: `kubectl apply -k k8s/`

